#:import Clipboard kivy.core.clipboard.Clipboard
<Label>:
	font_size: sp(13)
	halign: 'center'

<TextInput>:
	font_size: sp(15)
	size_hint_y: None
	height: sp(30)

<Button>:
	size_hint_y: None
	height: sp(30)


<PLabel@Label>:
	canvas.before:
		Color:
			rgba: 33/255., 33/255., 33/255., .8
		Rectangle:
			size: self.size
			pos: self.pos
	size_hint_y: None
	height: sp(50)
	font_size: sp(20)

MainScreen:

<MainScreen>:
	orientation: 'vertical'
	user: user
	carousel: carousel
	searchbook: searchbook
	bookslist: bookslist
	downloads: downloads
	sb: sb
	bb: bb
	db: db
	ActionBar:
		ActionView:
			use_separator: True
			ActionPrevious:
				app_icon: 'icon1.png'
				title: 'Library Genesis'
				with_previous: False
			ActionOverflow:
				ActionButton:
					text: 'Search Book'
					id: sb
					on_press: app.root.carousel.load_slide(app.root.searchbook)
				ActionButton:
					text: 'Books List'
					id: bb
					on_press: app.root.carousel.load_slide(app.root.bookslist)
				ActionButton:
					text: 'Downloads'
					id: db
					on_press: app.root.carousel.load_slide(app.root.downloads)
	Carousel:
		canvas:
			Color:
				rgb: 1, 1, 1
			Rectangle:
				size: self.height*2, self.height
				pos: self.pos
				source: 'books.jpg'
			Color:
				rgba: 0, 0, 0, .4
			Rectangle:
				size: self.height*2, self.height
				pos: self.pos
		id: carousel
		User:
			id: user
		SearchBook:
			id: searchbook
		BooksList:
			id: bookslist
		Downloads:
			id: downloads

<User@BoxLayout>:
	orientation: 'vertical'
	padding: sp(20)
	spacing: sp(5)
	BoxLayout:
	Label:
		id: anon
		canvas.before:
			Color:
				rgba: 33/255., 33/255., 33/255., .8
			Rectangle:
				size: self.size
				pos: self.pos
		text: '[size=15sp]You are an [b]Anonymous[/b] User.[/size]\n[color=#e74c3c]anonymous users are not allowed to download.[/color]'
		markup: True
		size_hint_y: None
		height: self.texture_size[1]+sp(10)
		text_size: (self.width, None)
	Label:
		id: sin
		text: 'Give yourself an identity.'
		markup: True
		size_hint_y: None
		height: self.texture_size[1]+sp(10)
		text_size: (self.width, None)
		font_size: sp(20)
	BoxLayout:
		spacing: sp(5)
		padding: sp(5)
		orientation: 'vertical'
		size_hint_y: None
		height: sp(200)
		TextInput:
			hint_text: 'Email'
			id: semail
		TextInput:
			hint_text: 'Username'
			id: susername
		TextInput:
			hint_text: 'Password'
			id: spassword
			password: True
		Button:
			text: 'Sign Up'
			on_press: app.root.signup()
	BoxLayout:
	# Label:
	# 	text: 'Or'
	# 	markup: True
	# 	size_hint_y: None
	# 	height: self.texture_size[1]+sp(10)
	# 	text_size: (self.width, None)
	# 	font_size: sp(17)
	# BoxLayout:
	# 	spacing: sp(5)
	# 	padding: sp(5)
	# 	orientation: 'vertical'
	# 	size_hint_y: None
	# 	height: sp(150)
	# 	TextInput:
	# 		hint_text: 'Username'
	# 		id: lusername
	# 	TextInput:
	# 		hint_text: 'Password'
	# 		id: lpassword
	# 		password: True
	# 	Button:
	# 		text: 'Login'
	# 		on_press: app.root.logging()

<SearchBook@RelativeLayout>:
	book_search_box: book_search_box
	Label:
		canvas.before:
			Color:
				rgba: 33/255., 33/255., 33/255., .8
			Rectangle:
				size: self.size
				pos: self.pos
		text: 'Search Book'
		font_size: sp(20)
		size_hint: 1, None
		height: sp(50)
		top: root.top
	TextInput:
		id: book_search_box
		on_text_validate: app.root.search_book()
		multiline: False
		size_hint: .7, None
		height: sp(30)
		pos_hint: {'center_x': .5, 'center_y': .53}
	Button:
		text: 'Search'
		on_press: app.root.search_book()
		size_hint: .7, None
		height: sp(30)
		pos_hint: {'center_x': .5, 'center_y': .47}

<BooksList@BoxLayout>:
	content: content
	spacing: sp(5)
	orientation: 'vertical'
	PLabel:
		text: 'Book List'
	ScrollView:
		BoxLayout:
			id: content
			orientation: 'vertical'
			size_hint_y: None
			height: self.minimum_height
			spacing: sp(13)
			padding: sp(13)

<Downloads@BoxLayout>:
	content: content
	spacing: sp(5)
	orientation: 'vertical'
	PLabel:
		text: 'Downloads'
	ScrollView:
		BoxLayout:
			id: content
			orientation: 'vertical'
			size_hint_y: None
			height: self.minimum_height
			spacing: sp(13)
			padding: sp(13)

<Book@BoxLayout>:
	canvas:
		Color:
			rgba: 33/255., 33/255., 33/255., .8
		Rectangle:
			size: self.size
			pos: self.pos
	title: title
	author: author
	size_: size_
	format_: format_
	link: ''
	download_btn: download_btn
	size_hint: .9, None
	pos_hint: {'center_x': .5}
	height: self.minimum_height
	orientation: 'vertical'
	spacing: sp(5)
	padding: sp(5)
	Label:
		id: title
		size_hint_y: None
		height: self.texture_size[1]
		text_size: self.width, None
		text: ''
		font_size: sp(15)
	Label:
		id: author
		size_hint_y: None
		height: self.texture_size[1]
		text_size: self.width, None
		text: ''
	Label:
		id: size_
		size_hint_y: None
		height: self.texture_size[1]
		text: ''
	Label:
		id: format_
		size_hint_y: None
		height: self.texture_size[1]
		text: ''
	Button:
		id: download_btn
		text: 'Download'
		size_hint_y: None
		height: self.texture_size[1]+sp(10)
		on_press: app.root.download_book(root)

<BookDownload@BoxLayout>:
	canvas:
		Color:
			rgba: 33/255., 33/255., 33/255., .8
		Rectangle:
			size: self.size
			pos: self.pos
	title: title
	progress: progress
	img: img
	format_: ''
	size_hint_y: None
	height: self.minimum_height
	orientation: 'vertical'
	spacing: sp(5)
	padding: sp(5)
	AsyncImage:
		id: img
		source: ''
		allow_stretch: True
		size_hint_y: None
		height: sp(170)
	Label:
		id: title
		size_hint_y: None
		height: self.texture_size[1]
		text_size: self.width, None
		text: ''
	ProgressBar:
		id: progress

<Waiting@Popup>:
	auto_dismiss: False
	size_hint: (.4, .3)
	title: ''
	Label:
		text: 'Please Wait'

<Error@Popup>:
	size_hint: .8, None
	height: error.height + sp(80)
	title: 'Check your connection!'
	error: error
	Label:
		id: error
		text: ''
		size_hint_y: None
		height: self.texture_size[1]
		text_size: self.width, None

<Update@Popup>:
	size_hint: .8, .8
	title: 'Required Update'
	auto_dismiss: False
	BoxLayout:
		orientation: 'vertical'
		spacing: sp(5)
		padding: sp(5)
		BoxLayout:
		Label:
			text: 'Go To [color=#3498db][b]hp7017.github.io/Library-Genesis/[/b][/color] and download the latest versions.'
			size_hint_y: None
			height: self.texture_size[1]
			text_size: self.width, None
			markup: True
			font_size: sp(17)
		Button:
			text: 'Copy Link'
			on_press:
				Clipboard.copy('hp7017.github.io/Library-Genesis/')
		BoxLayout: