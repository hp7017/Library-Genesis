#:import Clipboard kivy.core.clipboard.Clipboard
<Label>:
	font_size: sp(13)
	halign: 'center'

<TextInput>:
	font_size: sp(15)
	size_hint_y: None
	height: sp(30)

<PLabel@Label>:
	canvas.before:
		Color:
			rgba: 33/255., 33/255., 33/255., .8
		Rectangle:
			size: self.size
			pos: self.pos
	size_hint_y: None
	height: sp(50)
	font_size: sp(20)

<MainScreen>:
	orientation: 'vertical'
	carousel: carousel
	searchbook: searchbook
	bookslist: bookslist
	downloads: downloads
	sb: sb
	bb: bb
	db: db
	ActionBar:
		ActionView:
			use_separator: True
			ActionPrevious:
				app_icon: 'icon1.png'
				title: 'Library Genesis'
				with_previous: False
			ActionOverflow:
				ActionButton:
					text: 'Search Book'
					id: sb
					on_press: app.root.carousel.load_slide(app.root.searchbook)
				ActionButton:
					text: 'Books List'
					id: bb
					on_press: app.root.carousel.load_slide(app.root.bookslist)
				ActionButton:
					text: 'Downloads'
					id: db
					on_press: app.root.carousel.load_slide(app.root.downloads)
	Carousel:
		canvas:
			Color:
				rgb: 1, 1, 1
			Rectangle:
				size: self.height*2, self.height
				pos: self.pos
				source: 'books.jpg'
			Color:
				rgba: 0, 0, 0, .4
			Rectangle:
				size: self.height*2, self.height
				pos: self.pos
		id: carousel
		SearchBook:
			id: searchbook
		BooksList:
			id: bookslist
		Downloads:
			id: downloads

<SearchBook@RelativeLayout>:
	book_search_box: book_search_box
	Label:
		canvas.before:
			Color:
				rgba: 33/255., 33/255., 33/255., .8
			Rectangle:
				size: self.size
				pos: self.pos
		text: 'Search Book'
		font_size: sp(20)
		size_hint: 1, None
		height: sp(50)
		top: root.top
	TextInput:
		id: book_search_box
		on_text_validate: app.root.search_book()
		multiline: False
		size_hint: .7, None
		height: sp(30)
		pos_hint: {'center_x': .5, 'center_y': .53}
	Button:
		text: 'Search'
		on_press: app.root.search_book()
		size_hint: .7, None
		height: sp(30)
		pos_hint: {'center_x': .5, 'center_y': .47}

<BooksList@BoxLayout>:
	content: content
	spacing: sp(5)
	orientation: 'vertical'
	PLabel:
		text: 'Book List'
	ScrollView:
		BoxLayout:
			id: content
			orientation: 'vertical'
			size_hint_y: None
			height: self.minimum_height
			spacing: sp(13)
			padding: sp(13)

<Downloads@BoxLayout>:
	content: content
	spacing: sp(5)
	orientation: 'vertical'
	PLabel:
		text: 'Downloads'
	ScrollView:
		BoxLayout:
			id: content
			orientation: 'vertical'
			size_hint_y: None
			height: self.minimum_height
			spacing: sp(13)
			padding: sp(13)

<Login@BoxLayout>:
	name: name
	email: email
	orientation: 'vertical'
	spacing: sp(5)
	padding: sp(5)
	BoxLayout:
	BoxLayout:
		padding: sp(8)
		canvas:
			Color:
				rgba: 0, 0, 0, .6
			Rectangle:
				size: self.size
				pos: self.pos
		size_hint_y: None
		height: sp(50)
		Label:
			text: 'Name'
			font_size: sp(17)			
		TextInput:
			id: name
	BoxLayout:
		padding: sp(8)
		canvas:
			Color:
				rgba: 0, 0, 0, .6
			Rectangle:
				size: self.size
				pos: self.pos
		size_hint_y: None
		height: sp(50)
		Label:
			text: 'Email'
			font_size: sp(17)
		TextInput:
			id: email
	Button:
		text: 'Save'
		size_hint_y: None
		height: sp(40)
		font_size: sp(17)
		on_release: app.root.create_user()
	BoxLayout:

<Book@BoxLayout>:
	canvas:
		Color:
			rgba: 33/255., 33/255., 33/255., .8
		Rectangle:
			size: self.size
			pos: self.pos
	title: title
	author: author
	size_: size_
	format_: format_
	link: ''
	download_btn: download_btn
	size_hint: .9, None
	pos_hint: {'center_x': .5}
	height: self.minimum_height
	orientation: 'vertical'
	spacing: sp(5)
	padding: sp(5)
	Label:
		id: title
		size_hint_y: None
		height: self.texture_size[1]
		text_size: self.width, None
		text: ''
		font_size: sp(15)
	Label:
		id: author
		size_hint_y: None
		height: self.texture_size[1]
		text_size: self.width, None
		text: ''
	Label:
		id: size_
		size_hint_y: None
		height: self.texture_size[1]
		text: ''
	Label:
		id: format_
		size_hint_y: None
		height: self.texture_size[1]
		text: ''
	Button:
		id: download_btn
		text: 'Download'
		size_hint_y: None
		height: self.texture_size[1]+sp(10)
		on_press: app.root.download_book(root)

<BookDownload@BoxLayout>:
	canvas:
		Color:
			rgba: 33/255., 33/255., 33/255., .8
		Rectangle:
			size: self.size
			pos: self.pos
	title: title
	progress: progress
	img: img
	format_: ''
	size_hint_y: None
	height: self.minimum_height
	orientation: 'vertical'
	spacing: sp(5)
	padding: sp(5)
	AsyncImage:
		id: img
		source: ''
		allow_stretch: True
		size_hint_y: None
		height: sp(170)
	Label:
		id: title
		size_hint_y: None
		height: self.texture_size[1]
		text_size: self.width, None
		text: ''
	ProgressBar:
		id: progress

<Waiting@Popup>:
	auto_dismiss: False
	size_hint: (.4, .3)
	title: ''
	Label:
		text: 'Please Wait'

<Error@Popup>:
	size_hint: .8, .8
	title: 'Check your connection!'
	error: error
	ScrollView:
		Label:
			id: error
			text: ''
			size_hint_y: None
			height: self.texture_size[1]
			text_size: self.width, None

<Update@Popup>:
	size_hint: .8, .8
	title: 'Required Update'
	auto_dismiss: False
	BoxLayout:
		orientation: 'vertical'
		spacing: sp(5)
		padding: sp(5)
		BoxLayout:
		Label:
			text: 'Go To [color=#3498db][b]librarygenesis.in[/b][/color] and download the latest versions.'
			size_hint_y: None
			height: self.texture_size[1]
			text_size: self.width, None
			markup: True
			font_size: sp(17)
		Button:
			text: 'Copy Link'
			on_press:
				Clipboard.copy('librarygenesis.in')
		BoxLayout: